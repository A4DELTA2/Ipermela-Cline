# APPLE CDN IMAGES - GUIDA IMPLEMENTAZIONE IPERMELA STORE

## CONTESTO E OBIETTIVO

Questa guida contiene tutte le informazioni necessarie per implementare le immagini ufficiali Apple CDN nell'app Ipermela Store. Include URL verificati, pattern di costruzione URL, codici colore HEX, e procedure per ottenere nuovi URL.

**App Target:** Ipermela Store (e-commerce prodotti Apple)
**Requisito:** Mostrare immagini reali prodotti Apple con colori visibili per selezione colore cliente

---

## SEZIONE 1: URL VERIFICATI E FUNZIONANTI (12 URL TESTATI)

### MacBook Air 13" M4 - 7 URL

**Midnight (#1D1D1F)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503_AV1?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503_AV2?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503_AV3?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Sky Blue (#A7C1D9)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-skyblue-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-skyblue-202503_AV1?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Silver (#E3E4E5)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-silver-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

### MacBook Air 15" M4 - 5 URL

**Silver (#E3E4E5)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba15-m4-silver-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba15-m4-silver-202503_AV5?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Midnight (#1D1D1F)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba15-m4-midnight-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Sky Blue (#A7C1D9)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba15-m4-skyblue-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Starlight (#F0E4D3)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba15-m4-starlight-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

### MacBook Pro 14" M4 - 3 URL

**Space Black (#1D1D1F)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mbp14-m4-spaceblack-202502?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mbp14-m4-spaceblack-202502_AV2?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Silver (#E3E4E5)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mbp14-m4-silver-202502?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

### MacBook Pro 16" M4 - 3 URL

**Space Black (#1D1D1F)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mbp16-m4-spaceblack-202502?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mbp16-m4-spaceblack-202502_AV4?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Silver (#E3E4E5)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mbp16-m4-silver-202502?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

### iMac 24" - 6 URL

**Blue (#5E9DCC)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-imac-24-blue-2021?wid=2000&hei=2000&fmt=jpeg&qlt=90
```

**Green (#AED0A4)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-imac-24-green-2021?wid=2000&hei=2000&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-imac-24-green-2021_AV2?wid=2000&hei=2000&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-imac-24-green-touchid-2021?wid=2000&hei=2000&fmt=jpeg&qlt=90
```

**Purple (#B8B4D6)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-imac-24-purple-2021?wid=2000&hei=2000&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-imac-24-purple-2021_AV3?wid=2000&hei=2000&fmt=jpeg&qlt=90
```

### iPhone 15 - 2 URL

**Black (#1D1D1F)**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-iphone-15-black-202412?wid=2000&hei=2000&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-iphone-15-black-202412_AV2?wid=2000&hei=2000&fmt=jpeg&qlt=90
```

---

## SEZIONE 2: PATTERN URL PER PRODOTTI 2024-2025

### TEMPLATE BASE URL
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/{IMAGE_ID}?wid={WIDTH}&hei={HEIGHT}&fmt={FORMAT}&qlt={QUALITY}&.v={VERSION_HASH}&traceId=1
```

**Nota:** Il parametro `.v=` contiene un hash di versione. Gli URL funzionano anche SENZA questo parametro, ma per performance ottimali Ã¨ meglio ottenerlo tramite DevTools.

### iPhone 16 Plus (6.7 inch)

**Colori disponibili:** Ultramarine, Teal, Pink, White, Black

**Pattern Image ID:**
```
iphone-16-plus-finish-select-202409-6-7inch-{color}
```

**Esempi URL costruiti:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-ultramarine?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-teal?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-pink?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-white?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-black?wid=5120&hei=2880&fmt=p-jpg&qlt=80
```

**Codici colore HEX:**
- Ultramarine: #4B69B0
- Teal: #7DB6B0
- Pink: #F5C6D6
- White: #F5F5F0
- Black: #1D1D1F

### iPhone 16 (6.1 inch)

**Colori disponibili:** Ultramarine, Teal, Pink, White, Black

**Pattern Image ID:**
```
iphone-16-finish-select-202409-6-1inch-{color}
```

**Esempi URL:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-finish-select-202409-6-1inch-ultramarine?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-finish-select-202409-6-1inch-teal?wid=5120&hei=2880&fmt=p-jpg&qlt=80
```

### iPhone 16e (6.1 inch)

**Colori disponibili:** Black, White

**Pattern Image ID:**
```
iphone-16e-finish-select-202502-6-1inch-{color}
```

**Esempi URL:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16e-finish-select-202502-6-1inch-black?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16e-finish-select-202502-6-1inch-white?wid=5120&hei=2880&fmt=p-jpg&qlt=80
```

### iPhone 17 Pro Max (6.9 inch)

**Colori disponibili:** Cosmic Orange, Deep Blue, Silver

**Pattern Image ID:**
```
iphone-17-pro-finish-select-202509-6-9inch-{color}
```

**URL Esempio Verificato (fornito dall'utente):**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-cosmicorange?wid=5120&hei=2880&fmt=p-jpg&qlt=80&.v=NUNzdzNKR0FJbmhKWm5YamRHb05tUzkyK3hWak1ybHhtWDkwUXVINFc0RnVrUzFnTVVSUnNLVnZUWUMxNTBGaGhsQTdPYWVGbmdIenAvNE9qYmZVYWVRU0p3cnVrZzhmdWQwTDVYRlMxUFpybkIybk5RZmlyRnNkQjBrajdkK0xqWUxobjNlSmdUU0RNNnFXZ0d4NHJR&traceId=1
```

**Esempi URL costruiti:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-cosmicorange?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-deepblue?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-silver?wid=5120&hei=2880&fmt=p-jpg&qlt=80
```

**Codici colore HEX:**
- Cosmic Orange: #FF6B35
- Deep Blue: #1E3A5F
- Silver: #E3E4E5

### iPhone 17 Pro (6.3 inch)

**Colori disponibili:** Cosmic Orange, Deep Blue, Silver

**Pattern Image ID:**
```
iphone-17-pro-finish-select-202509-6-3inch-{color}
```

**Esempi URL:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-3inch-cosmicorange?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-3inch-deepblue?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-3inch-silver?wid=5120&hei=2880&fmt=p-jpg&qlt=80
```

### iPhone 17 Air (6.5 inch)

**Colori disponibili:** Sky Blue, Light Gold, Cloud White, Space Black

**Pattern Image ID:**
```
iphone-air-finish-select-202509-6-5inch-{color}
```

**Esempi URL:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-air-finish-select-202509-6-5inch-skyblue?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-air-finish-select-202509-6-5inch-lightgold?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-air-finish-select-202509-6-5inch-cloudwhite?wid=5120&hei=2880&fmt=p-jpg&qlt=80

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-air-finish-select-202509-6-5inch-spaceblack?wid=5120&hei=2880&fmt=p-jpg&qlt=80
```

**Codici colore HEX:**
- Sky Blue: #A7C1D9
- Light Gold: #F0E4D3
- Cloud White: #F5F5F0
- Space Black: #1D1D1F

### iPhone 17 (Standard)

**Nota:** Pattern da determinare, probabilmente simile a iPhone 16 ma con date code 202509

### iPad Pro 13" M5

**Colori disponibili:** Space Black, Silver

**Pattern Image ID:**
```
ipad-pro-13-finish-select-202510-{color}
```

**Esempi URL:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-pro-13-finish-select-202510-spaceblack?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-pro-13-finish-select-202510-silver?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Codici colore HEX:**
- Space Black: #1D1D1F
- Silver: #E3E4E5

### iPad Pro 11" M5

**Colori disponibili:** Space Black, Silver

**Pattern Image ID:**
```
ipad-pro-11-finish-select-202510-{color}
```

### iPad Air 13" M3

**Colori disponibili:** Space Gray, Blue, Purple, Starlight

**Pattern Image ID:**
```
ipad-air-13-finish-select-202503-{color}
```

**Esempi URL:**
```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-air-13-finish-select-202503-spacegray?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-air-13-finish-select-202503-blue?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-air-13-finish-select-202503-purple?wid=4000&hei=3074&fmt=jpeg&qlt=90

https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-air-13-finish-select-202503-starlight?wid=4000&hei=3074&fmt=jpeg&qlt=90
```

**Codici colore HEX:**
- Space Gray: #86868B
- Blue: #5E9DCC
- Purple: #B8B4D6
- Starlight: #F0E4D3

### iPad Air 11" M3

**Colori disponibili:** Space Gray, Blue, Purple, Starlight

**Pattern Image ID:**
```
ipad-air-11-finish-select-202503-{color}
```

---

## SEZIONE 3: PARAMETRI URL E OTTIMIZZAZIONE

### Parametri Standard

**wid (width)** - Larghezza immagine in pixel
- Valori consigliati: 2000, 4000, 5120
- iPhone/iPad: 2000-5120
- MacBook: 4000
- iMac: 2000

**hei (height)** - Altezza immagine in pixel
- Valori consigliati: 2000, 2880, 3074
- iPhone/iPad: 2000-2880
- MacBook: 3074
- iMac: 2000

**fmt (format)** - Formato immagine
- `jpeg` - Standard, buona compressione
- `p-jpg` - Progressive JPEG, caricamento progressivo
- `png-alpha` - PNG con trasparenza (se necessario)

**qlt (quality)** - QualitÃ  compressione (1-100)
- Consigliato: 80-90
- E-commerce: 80 (buon bilanciamento qualitÃ /peso)
- Alta qualitÃ : 90-95

**.v (version hash)** - Hash versione CDN
- Formato: stringa base64 lunga
- Esempio: `NUNzdzNKR0FJbmhKWm5YamRHb05tUzkyK3hWak1ybHhtWDkwUXVINFc0RnVr...`
- **Non obbligatorio** ma migliora cache/performance
- Si ottiene solo tramite DevTools (vedi Sezione 4)

**traceId** - ID tracciamento
- Valore: sempre `1`
- Opzionale

### Combinazioni Consigliate per E-commerce

**Thumbnail prodotto (lista)**
```
?wid=800&hei=800&fmt=jpeg&qlt=80
```

**Immagine dettaglio prodotto**
```
?wid=2000&hei=2000&fmt=jpeg&qlt=85
```

**Galleria alta risoluzione**
```
?wid=4000&hei=3074&fmt=p-jpg&qlt=90
```

**Mobile ottimizzato**
```
?wid=1200&hei=1200&fmt=jpeg&qlt=80
```

---

## SEZIONE 4: PROCEDURA DEVTOOLS PER URL COMPLETI

Apple genera URL dinamicamente con hash `.v=` che cambia nel tempo. Per ottenere URL completi e aggiornati:

### Procedura Step-by-Step

1. **Apri pagina prodotto Apple Store**
   - Esempio: https://www.apple.com/shop/buy-iphone/iphone-16
   - Oppure: https://www.apple.com/shop/buy-mac/macbook-air

2. **Apri DevTools**
   - Chrome/Edge: `F12` o `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)
   - Safari: `Cmd+Option+I` (abilita prima Developer Menu in Preferences)

3. **Vai al tab Network**
   - Clicca sulla tab "Network" nel pannello DevTools

4. **Filtra per immagini**
   - Nella barra filtro scrivi: `cdn-apple` oppure `images`
   - Oppure seleziona filtro "Img" se disponibile

5. **Cambia colore nel configuratore**
   - Clicca sui diversi colori nel selettore del prodotto
   - Ogni click carica una nuova immagine

6. **Identifica URL immagine**
   - Nel Network tab appariranno richieste con pattern:
     ```
     iphone-16-finish-select-202409-6-7inch-ultramarine?wid=...
     ```
   - Clicca sulla richiesta per vedere dettagli

7. **Copia URL completo**
   - Nel pannello destro, sotto "Headers" â†’ "General"
   - Copia il "Request URL"
   - L'URL conterrÃ  il parametro `.v=` con hash completo

8. **Ripeti per ogni colore**
   - Cambia colore nel configuratore
   - Copia nuovo URL dal Network tab

### Esempio Output DevTools

```
https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-cosmicorange?wid=5120&hei=2880&fmt=p-jpg&qlt=80&.v=NUNzdzNKR0FJbmhKWm5YamRHb05tUzkyK3hWak1ybHhtWDkwUXVINFc0RnVrUzFnTVVSUnNLVnZUWUMxNTBGaGhsQTdPYWVGbmdIenAvNE9qYmZVYWVRU0p3cnVrZzhmdWQwTDVYRlMxUFpybkIybk5RZmlyRnNkQjBrajdkK0xqWUxobjNlSmdUU0RNNnFXZ0d4NHJR&traceId=1
```

### Alternative Senza DevTools

Se non puoi usare DevTools:
- Usa URL SENZA parametro `.v=`
- L'immagine verrÃ  comunque caricata
- Possibile cache non ottimale
- Esempio:
  ```
  https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-ultramarine?wid=5120&hei=2880&fmt=p-jpg&qlt=80
  ```

---

## SEZIONE 5: CODICI COLORE HEX COMPLETI

### iPhone

| Colore | Nome Apple | Codice HEX | Prodotti |
|--------|-----------|------------|----------|
| Black | Nero | #1D1D1F | 16, 16 Plus, 16e |
| White | Bianco | #F5F5F0 | 16, 16 Plus, 16e |
| Pink | Rosa | #F5C6D6 | 16, 16 Plus |
| Teal | Verde Acqua | #7DB6B0 | 16, 16 Plus |
| Ultramarine | Blu Oltremare | #4B69B0 | 16, 16 Plus |
| Cosmic Orange | Arancione Cosmico | #FF6B35 | 17 Pro, 17 Pro Max |
| Deep Blue | Blu Profondo | #1E3A5F | 17 Pro, 17 Pro Max |
| Silver | Argento | #E3E4E5 | 17 Pro, 17 Pro Max |
| Sky Blue | Azzurro Cielo | #A7C1D9 | 17 Air |
| Light Gold | Oro Chiaro | #F0E4D3 | 17 Air |
| Cloud White | Bianco Nuvola | #F5F5F0 | 17 Air |
| Space Black | Nero Siderale | #1D1D1F | 17 Air |

### MacBook

| Colore | Nome Apple | Codice HEX | Prodotti |
|--------|-----------|------------|----------|
| Midnight | Mezzanotte | #1D1D1F | Air 13", Air 15" |
| Starlight | Galassia | #F0E4D3 | Air 13", Air 15" |
| Silver | Argento | #E3E4E5 | Air 13", Air 15", Pro 14", Pro 16" |
| Sky Blue | Azzurro Cielo | #A7C1D9 | Air 13", Air 15" (2025) |
| Space Black | Nero Siderale | #1D1D1F | Pro 14", Pro 16" |

### iPad

| Colore | Nome Apple | Codice HEX | Prodotti |
|--------|-----------|------------|----------|
| Space Black | Nero Siderale | #1D1D1F | Pro 13" M5, Pro 11" M5 |
| Silver | Argento | #E3E4E5 | Pro 13" M5, Pro 11" M5 |
| Space Gray | Grigio Siderale | #86868B | Air 13", Air 11" |
| Blue | Blu | #5E9DCC | Air 13", Air 11" |
| Purple | Viola | #B8B4D6 | Air 13", Air 11" |
| Starlight | Galassia | #F0E4D3 | Air 13", Air 11" |

### iMac 24"

| Colore | Nome Apple | Codice HEX |
|--------|-----------|------------|
| Blue | Blu | #5E9DCC |
| Green | Verde | #AED0A4 |
| Purple | Viola | #B8B4D6 |
| Orange | Arancione | #F4A261 |
| Yellow | Giallo | #F4E285 |
| Silver | Argento | #E3E4E5 |
| Pink | Rosa | #F5C6D6 |

---

## SEZIONE 6: CONVENZIONI NAMING

### Regole Generali

1. **Colori sempre minuscolo**
   - âœ… `spaceblack`, `ultramarine`, `cosmicorange`, `skyblue`
   - âŒ `SpaceBlack`, `Ultramarine`, `Cosmic Orange`, `Sky Blue`

2. **Nomi colore senza spazi**
   - âœ… `deepblue`, `lightgold`, `cloudwhite`
   - âŒ `deep-blue`, `light_gold`, `cloud white`

3. **Pattern Product ID**
   ```
   {product}-{type}-{date}-{size}-{color}
   ```
   - `product`: iphone-16, iphone-17-pro, macbook-air
   - `type`: finish-select (iPhone), refurb (Mac/iPad)
   - `date`: YYYYMM (202409, 202503, 202509)
   - `size`: 6-1inch, 6-7inch, 13", 15"
   - `color`: midnight, silver, ultramarine

4. **Date Code Formato**
   - YYYYMM: anno (4 cifre) + mese (2 cifre)
   - Esempi: 202409 (Settembre 2024), 202503 (Marzo 2025), 202509 (Settembre 2025)

5. **Display Size**
   - iPhone: `6-1inch`, `6-3inch`, `6-5inch`, `6-7inch`, `6-9inch`
   - Mac: `13"`, `14"`, `15"`, `16"`, `24"`
   - iPad: `11"`, `13"`

### Pattern per Categoria

**iPhone (2024-2025)**
```
iphone-{model}-finish-select-{date}-{size}-{color}
```
Esempio: `iphone-16-plus-finish-select-202409-6-7inch-ultramarine`

**iPhone (modelli precedenti - refurb)**
```
refurb-iphone-{model}-{color}-{date}
```
Esempio: `refurb-iphone-15-black-202412`

**MacBook**
```
refurb-{model}-{chip}-{color}-{date}
```
Esempio: `refurb-mba13-m4-midnight-202503`

**iMac**
```
refurb-imac-{size}-{color}-{year}
```
Esempio: `refurb-imac-24-green-2021`

**iPad**
```
ipad-{model}-{size}-finish-select-{date}-{color}
```
Esempio: `ipad-pro-13-finish-select-202510-spaceblack`

---

## SEZIONE 7: IMPLEMENTAZIONE JAVASCRIPT

### Funzione Costruttore URL Base

```javascript
/**
 * Costruisce URL immagine Apple CDN
 * @param {string} imageId - ID immagine (es: 'iphone-16-plus-finish-select-202409-6-7inch-ultramarine')
 * @param {object} options - Opzioni parametri
 * @returns {string} URL completo
 */
function buildAppleCDNUrl(imageId, options = {}) {
    const defaults = {
        wid: 2000,
        hei: 2000,
        fmt: 'jpeg',
        qlt: 80,
        version: null, // Hash .v= (opzionale)
        traceId: null
    };
    
    const params = { ...defaults, ...options };
    
    let url = `https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/${imageId}`;
    
    const queryParams = [];
    queryParams.push(`wid=${params.wid}`);
    queryParams.push(`hei=${params.hei}`);
    queryParams.push(`fmt=${params.fmt}`);
    queryParams.push(`qlt=${params.qlt}`);
    
    if (params.version) {
        queryParams.push(`.v=${params.version}`);
    }
    
    if (params.traceId) {
        queryParams.push(`traceId=${params.traceId}`);
    }
    
    url += '?' + queryParams.join('&');
    
    return url;
}
```

### Funzione Costruttore Image ID

```javascript
/**
 * Costruisce Image ID per iPhone
 * @param {string} model - Modello (es: '16-plus', '17-pro')
 * @param {string} color - Colore minuscolo senza spazi (es: 'ultramarine')
 * @param {string} dateCode - Codice data YYYYMM (es: '202409')
 * @param {string} size - Dimensione display (es: '6-7inch')
 * @returns {string} Image ID
 */
function buildIPhoneImageId(model, color, dateCode, size) {
    return `iphone-${model}-finish-select-${dateCode}-${size}-${color}`;
}

/**
 * Costruisce Image ID per MacBook
 * @param {string} model - Modello (es: 'mba13', 'mbp14')
 * @param {string} chip - Chip (es: 'm4')
 * @param {string} color - Colore (es: 'midnight')
 * @param {string} dateCode - Codice data YYYYMM
 * @returns {string} Image ID
 */
function buildMacBookImageId(model, chip, color, dateCode) {
    return `refurb-${model}-${chip}-${color}-${dateCode}`;
}

/**
 * Costruisce Image ID per iPad
 * @param {string} model - Modello (es: 'pro-13', 'air-11')
 * @param {string} color - Colore (es: 'spaceblack')
 * @param {string} dateCode - Codice data YYYYMM
 * @returns {string} Image ID
 */
function buildIPadImageId(model, color, dateCode) {
    return `ipad-${model}-finish-select-${dateCode}-${color}`;
}
```

### Funzione Normalizzazione Colore

```javascript
/**
 * Normalizza nome colore per URL Apple CDN
 * @param {string} colorName - Nome colore (puÃ² contenere spazi e maiuscole)
 * @returns {string} Nome colore normalizzato
 */
function normalizeColorName(colorName) {
    return colorName
        .toLowerCase()
        .replace(/\s+/g, '') // Rimuovi spazi
        .replace(/-/g, ''); // Rimuovi trattini
}

// Esempi
normalizeColorName('Deep Blue') // â†’ 'deepblue'
normalizeColorName('Sky Blue') // â†’ 'skyblue'
normalizeColorName('Space Black') // â†’ 'spaceblack'
```

### Esempio Integrazione Completo

```javascript
// Database colori per iPhone 16 Plus
const iphone16PlusColors = [
    { name: 'Ultramarine', code: 'ultramarine', hex: '#4B69B0' },
    { name: 'Teal', code: 'teal', hex: '#7DB6B0' },
    { name: 'Pink', code: 'pink', hex: '#F5C6D6' },
    { name: 'White', code: 'white', hex: '#F5F5F0' },
    { name: 'Black', code: 'black', hex: '#1D1D1F' }
];

// Genera URL per tutti i colori iPhone 16 Plus
iphone16PlusColors.forEach(color => {
    const imageId = buildIPhoneImageId('16-plus', color.code, '202409', '6-7inch');
    const url = buildAppleCDNUrl(imageId, {
        wid: 5120,
        hei: 2880,
        fmt: 'p-jpg',
        qlt: 80
    });
    
    console.log(`${color.name}: ${url}`);
});

// Output:
// Ultramarine: https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-ultramarine?wid=5120&hei=2880&fmt=p-jpg&qlt=80
// Teal: https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-teal?wid=5120&hei=2880&fmt=p-jpg&qlt=80
// ...
```

### Helper per Fallback Immagini

```javascript
/**
 * Gestisce fallback se immagine non disponibile
 * @param {HTMLImageElement} img - Elemento immagine
 * @param {string} fallbackUrl - URL fallback
 */
function setupImageFallback(img, fallbackUrl) {
    img.onerror = function() {
        if (this.src !== fallbackUrl) {
            this.src = fallbackUrl;
        } else {
            // Se anche fallback fallisce, mostra placeholder
            this.style.display = 'none';
            this.nextElementSibling.style.display = 'flex';
        }
    };
}

// Uso
const img = document.getElementById('product-image');
const primaryUrl = buildAppleCDNUrl('iphone-16-plus-finish-select-202409-6-7inch-ultramarine');
const fallbackUrl = 'https://placehold.co/600x800/4B69B0/ffffff?text=iPhone+16+Plus';

img.src = primaryUrl;
setupImageFallback(img, fallbackUrl);
```

---

## SEZIONE 8: INTEGRAZIONE IPERMELA STORE

### Modifiche File script.js

#### 1. Aggiungi Database URL Completo

Sostituisci gli `imageUrl` nei prodotti esistenti con URL CDN reali:

```javascript
// iPhone 17 Pro Max
{
    id: 1,
    name: 'iPhone 17 Pro Max',
    price: 1499,
    category: 'iphone',
    icon: 'ðŸ“±',
    colors: [
        { 
            name: 'Argento', 
            code: 'silver', 
            gradient: 'linear-gradient(135deg, #E8E8E8 0%, #C0C0C0 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-silver?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        },
        { 
            name: 'Blu Profondo', 
            code: 'deep-blue', 
            gradient: 'linear-gradient(135deg, #1E3A5F 0%, #0A1929 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-deepblue?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        },
        { 
            name: 'Arancione Cosmico', 
            code: 'cosmic-orange', 
            gradient: 'linear-gradient(135deg, #FF6B35 0%, #C44D34 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-cosmicorange?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        }
    ],
    storage: ['256GB', '512GB', '1TB', '2TB']
},

// iPhone 16 Plus
{
    id: 5,
    name: 'iPhone 16 Plus',
    price: 999,
    category: 'iphone',
    icon: 'ðŸ“±',
    colors: [
        { 
            name: 'Nero', 
            code: 'black', 
            gradient: 'linear-gradient(135deg, #1C1C1E 0%, #000000 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-black?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        },
        { 
            name: 'Bianco', 
            code: 'white', 
            gradient: 'linear-gradient(135deg, #F5F5F0 0%, #FFFFFF 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-white?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        },
        { 
            name: 'Rosa', 
            code: 'pink', 
            gradient: 'linear-gradient(135deg, #FFB6C1 0%, #FF69B4 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-pink?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        },
        { 
            name: 'Verde Acqua', 
            code: 'teal', 
            gradient: 'linear-gradient(135deg, #008B8B 0%, #006666 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-teal?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        },
        { 
            name: 'Blu Oltremare', 
            code: 'ultramarine', 
            gradient: 'linear-gradient(135deg, #120A8F 0%, #000080 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-ultramarine?wid=5120&hei=2880&fmt=p-jpg&qlt=80'
        }
    ],
    storage: ['128GB', '256GB', '512GB']
},

// MacBook Air 13" M4
{
    id: 100,
    name: 'MacBook Air 13" M4',
    price: 1199,
    category: 'mac',
    subcategory: 'macbook-air',
    icon: 'ðŸ’»',
    colors: [
        { 
            name: 'Midnight', 
            code: 'midnight', 
            gradient: 'linear-gradient(135deg, #1C1C1E 0%, #000000 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90'
        },
        { 
            name: 'Starlight', 
            code: 'starlight', 
            gradient: 'linear-gradient(135deg, #F5F5F0 0%, #E8E8E0 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-starlight-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90'
        },
        { 
            name: 'Silver', 
            code: 'silver', 
            gradient: 'linear-gradient(135deg, #E8E8E8 0%, #C0C0C0 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-silver-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90'
        },
        { 
            name: 'Sky Blue', 
            code: 'skyblue', 
            gradient: 'linear-gradient(135deg, #87CEEB 0%, #4A90E2 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-skyblue-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90'
        }
    ],
    storage: ['256GB', '512GB', '1TB', '2TB']
},

// iPad Pro 13" M5
{
    id: 200,
    name: 'iPad Pro 13" (M5)',
    price: 1719,
    category: 'ipad',
    icon: 'ðŸ“²',
    colors: [
        { 
            name: 'Space Black', 
            code: 'space-black', 
            gradient: 'linear-gradient(135deg, #2C2C2E 0%, #1C1C1E 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-pro-13-finish-select-202510-spaceblack?wid=4000&hei=3074&fmt=jpeg&qlt=90'
        },
        { 
            name: 'Silver', 
            code: 'silver', 
            gradient: 'linear-gradient(135deg, #E8E8E8 0%, #C0C0C0 100%)', 
            imageUrl: 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-pro-13-finish-select-202510-silver?wid=4000&hei=3074&fmt=jpeg&qlt=90'
        }
    ],
    storage: ['256GB', '512GB', '1TB', '2TB']
}
```

#### 2. Aggiungi Funzioni Helper

Aggiungi queste funzioni all'inizio del file dopo le variabili globali:

```javascript
// ===== APPLE CDN IMAGE HELPERS =====

/**
 * Costruisce URL immagine Apple CDN ottimizzato per device
 */
function getOptimizedImageUrl(imageUrl, device = 'desktop') {
    if (!imageUrl) return '';
    
    // Determina parametri ottimali in base al device
    const params = {
        mobile: { wid: 1200, hei: 1200, qlt: 80 },
        tablet: { wid: 2000, hei: 2000, qlt: 85 },
        desktop: { wid: 2000, hei: 2000, qlt: 85 },
        hd: { wid: 4000, hei: 3074, qlt: 90 }
    };
    
    const selectedParams = params[device] || params.desktop;
    
    // Se URL giÃ  ha parametri, sostituiscili
    let optimizedUrl = imageUrl.split('?')[0];
    optimizedUrl += `?wid=${selectedParams.wid}&hei=${selectedParams.hei}&fmt=jpeg&qlt=${selectedParams.qlt}`;
    
    return optimizedUrl;
}

/**
 * Rileva device type
 */
function getDeviceType() {
    const width = window.innerWidth;
    if (width < 768) return 'mobile';
    if (width < 1200) return 'tablet';
    return 'desktop';
}

/**
 * Preload immagine con fallback
 */
function preloadImage(url, fallbackIcon = 'ðŸ“±') {
    return new Promise((resolve) => {
        const img = new Image();
        img.onload = () => resolve({ success: true, url });
        img.onerror = () => resolve({ success: false, fallbackIcon });
        img.src = url;
    });
}
```

#### 3. Modifica Funzione renderProducts()

Aggiorna la parte che gestisce le immagini:

```javascript
// Nel blocco HTML dell'immagine prodotto, sostituisci con:

${product.imageUrl || (hasColors && product.colors[0].imageUrl) ? `
<!-- Immagine Prodotto -->
<div class="relative mb-4 rounded-xl overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 p-8">
    <div class="w-full max-w-sm mx-auto">
        <img
            id="product-image-${product.id}"
            src="${getOptimizedImageUrl(
                product.colors && product.colors[0].imageUrl 
                    ? product.colors[0].imageUrl 
                    : product.imageUrl,
                getDeviceType()
            )}"
            alt="${product.name} ${product.colors && product.colors[0].name ? '- ' + product.colors[0].name : ''}"
            class="w-full h-auto image-fade-in"
            loading="lazy"
            onerror="handleImageError(this, '${product.icon}', '${product.name}')"
        />
        <div class="hidden flex-col items-center justify-center p-8 text-center" id="fallback-${product.id}">
            <div class="text-6xl mb-4">${product.icon}</div>
            <div class="text-gray-600 font-medium">${product.name}</div>
            <div class="text-gray-400 text-sm mt-2">Immagine non disponibile</div>
        </div>
    </div>
    <div class="absolute bottom-0 left-0 right-0 h-20 image-overlay pointer-events-none"></div>
</div>
` : ''}
```

#### 4. Aggiungi Gestore Errori Immagini

```javascript
/**
 * Gestisce errore caricamento immagine
 */
function handleImageError(imgElement, fallbackIcon, productName) {
    imgElement.style.display = 'none';
    const fallbackDiv = imgElement.nextElementSibling;
    if (fallbackDiv) {
        fallbackDiv.style.display = 'flex';
        fallbackDiv.innerHTML = `
            <div class="text-6xl mb-4">${fallbackIcon}</div>
            <div class="text-gray-600 font-medium">${productName}</div>
            <div class="text-gray-400 text-sm mt-2">Immagine non disponibile</div>
        `;
    }
}
```

#### 5. Aggiorna Funzione selectProductColor()

```javascript
function selectProductColor(productId, colorCode, imageUrl, colorName) {
    const card = document.querySelector(`.product-card[data-id="${productId}"]`);
    if (!card) return;

    // Aggiorna selezione visiva colori
    card.querySelectorAll('.color-swatch').forEach(swatch => {
        swatch.classList.remove('selected');
    });

    const clickedSwatch = Array.from(card.querySelectorAll('.color-swatch')).find(swatch =>
        swatch.getAttribute('title') === colorName
    );
    if (clickedSwatch) {
        clickedSwatch.classList.add('selected');
        clickedSwatch.setAttribute('data-image-url', imageUrl || '');
    }

    // Aggiorna testo colore selezionato
    const colorText = card.querySelector(`#selected-color-${productId}`);
    if (colorText) {
        colorText.textContent = colorName;
    }

    // Aggiorna immagine con URL ottimizzato
    if (imageUrl) {
        const image = card.querySelector(`#product-image-${productId}`);
        if (image) {
            // Fade out
            image.style.opacity = '0';
            
            // Preload nuova immagine
            const optimizedUrl = getOptimizedImageUrl(imageUrl, getDeviceType());
            preloadImage(optimizedUrl).then(result => {
                if (result.success) {
                    setTimeout(() => {
                        image.src = optimizedUrl;
                        image.style.transition = 'opacity 0.3s ease';
                        image.style.opacity = '1';
                    }, 300);
                } else {
                    // Mostra fallback
                    handleImageError(image, result.fallbackIcon, colorName);
                }
            });
        }
    }
}
```

### Test Implementazione

1. **Testa su diversi device**
   - Mobile: verifica caricamento immagini ottimizzate (1200x1200)
   - Desktop: verifica qualitÃ  immagini (2000x2000)

2. **Testa fallback**
   - Disconnetti internet temporaneamente
   - Verifica che appaia icona emoji + messaggio

3. **Testa cambio colore**
   - Verifica transizione fluida immagini
   - Verifica che URL cambi correttamente

4. **Performance**
   - Apri DevTools â†’ Network
   - Verifica dimensione immagini caricate
   - Mobile dovrebbe caricare ~200-400KB per immagine
   - Desktop ~500KB-1MB per immagine

---

## SEZIONE 9: DATABASE JSON COMPLETO

Creo file JSON separato con tutti gli URL verificati e pattern:

```json
{
  "metadata": {
    "version": "1.0",
    "lastUpdated": "2025-01-26",
    "source": "Apple Store CDN",
    "verified": true
  },
  
  "cdn": {
    "baseUrl": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/",
    "defaultParams": {
      "wid": 2000,
      "hei": 2000,
      "fmt": "jpeg",
      "qlt": 80
    }
  },
  
  "products": {
    "iphone": {
      "17-pro-max": {
        "model": "iPhone 17 Pro Max",
        "display": "6.9 inch",
        "dateCode": "202509",
        "pattern": "iphone-17-pro-finish-select-202509-6-9inch-{color}",
        "colors": [
          {
            "name": "Cosmic Orange",
            "code": "cosmicorange",
            "hex": "#FF6B35",
            "imageId": "iphone-17-pro-finish-select-202509-6-9inch-cosmicorange",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-cosmicorange?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": true
          },
          {
            "name": "Deep Blue",
            "code": "deepblue",
            "hex": "#1E3A5F",
            "imageId": "iphone-17-pro-finish-select-202509-6-9inch-deepblue",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-deepblue?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": false
          },
          {
            "name": "Silver",
            "code": "silver",
            "hex": "#E3E4E5",
            "imageId": "iphone-17-pro-finish-select-202509-6-9inch-silver",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-17-pro-finish-select-202509-6-9inch-silver?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": false
          }
        ]
      },
      
      "16-plus": {
        "model": "iPhone 16 Plus",
        "display": "6.7 inch",
        "dateCode": "202409",
        "pattern": "iphone-16-plus-finish-select-202409-6-7inch-{color}",
        "colors": [
          {
            "name": "Ultramarine",
            "code": "ultramarine",
            "hex": "#4B69B0",
            "imageId": "iphone-16-plus-finish-select-202409-6-7inch-ultramarine",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-ultramarine?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": false
          },
          {
            "name": "Teal",
            "code": "teal",
            "hex": "#7DB6B0",
            "imageId": "iphone-16-plus-finish-select-202409-6-7inch-teal",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-teal?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": false
          },
          {
            "name": "Pink",
            "code": "pink",
            "hex": "#F5C6D6",
            "imageId": "iphone-16-plus-finish-select-202409-6-7inch-pink",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-pink?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": false
          },
          {
            "name": "White",
            "code": "white",
            "hex": "#F5F5F0",
            "imageId": "iphone-16-plus-finish-select-202409-6-7inch-white",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-white?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": false
          },
          {
            "name": "Black",
            "code": "black",
            "hex": "#1D1D1F",
            "imageId": "iphone-16-plus-finish-select-202409-6-7inch-black",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-plus-finish-select-202409-6-7inch-black?wid=5120&hei=2880&fmt=p-jpg&qlt=80",
            "verified": false
          }
        ]
      }
    },
    
    "macbook": {
      "air-13-m4": {
        "model": "MacBook Air 13\" M4",
        "dateCode": "202503",
        "pattern": "refurb-mba13-m4-{color}-202503",
        "colors": [
          {
            "name": "Midnight",
            "code": "midnight",
            "hex": "#1D1D1F",
            "imageId": "refurb-mba13-m4-midnight-202503",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90",
            "verified": true,
            "alternateViews": [
              "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503_AV1?wid=4000&hei=3074&fmt=jpeg&qlt=90",
              "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503_AV2?wid=4000&hei=3074&fmt=jpeg&qlt=90",
              "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-midnight-202503_AV3?wid=4000&hei=3074&fmt=jpeg&qlt=90"
            ]
          },
          {
            "name": "Sky Blue",
            "code": "skyblue",
            "hex": "#A7C1D9",
            "imageId": "refurb-mba13-m4-skyblue-202503",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-skyblue-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90",
            "verified": true,
            "alternateViews": [
              "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-skyblue-202503_AV1?wid=4000&hei=3074&fmt=jpeg&qlt=90"
            ]
          },
          {
            "name": "Silver",
            "code": "silver",
            "hex": "#E3E4E5",
            "imageId": "refurb-mba13-m4-silver-202503",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-silver-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90",
            "verified": true
          },
          {
            "name": "Starlight",
            "code": "starlight",
            "hex": "#F0E4D3",
            "imageId": "refurb-mba13-m4-starlight-202503",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/refurb-mba13-m4-starlight-202503?wid=4000&hei=3074&fmt=jpeg&qlt=90",
            "verified": true
          }
        ]
      }
    },
    
    "ipad": {
      "pro-13-m5": {
        "model": "iPad Pro 13\" M5",
        "dateCode": "202510",
        "pattern": "ipad-pro-13-finish-select-202510-{color}",
        "colors": [
          {
            "name": "Space Black",
            "code": "spaceblack",
            "hex": "#1D1D1F",
            "imageId": "ipad-pro-13-finish-select-202510-spaceblack",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-pro-13-finish-select-202510-spaceblack?wid=4000&hei=3074&fmt=jpeg&qlt=90",
            "verified": false
          },
          {
            "name": "Silver",
            "code": "silver",
            "hex": "#E3E4E5",
            "imageId": "ipad-pro-13-finish-select-202510-silver",
            "url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-pro-13-finish-select-202510-silver?wid=4000&hei=3074&fmt=jpeg&qlt=90",
            "verified": false
          }
        ]
      }
    }
  }
}
```

---

## SEZIONE 10: CHECKLIST IMPLEMENTAZIONE

### Pre-Implementazione
- [ ] Leggi interamente questo documento
- [ ] Familiarizza con pattern URL Apple CDN
- [ ] Verifica accesso a DevTools browser
- [ ] Backup file script.js esistente

### Fase 1: Test URL Verificati
- [ ] Testa i 12 URL verificati nel browser
- [ ] Conferma che tutte le immagini si caricano
- [ ] Annota eventuali URL non funzionanti

### Fase 2: Estrazione URL con DevTools
- [ ] Apri apple.com/shop/buy-iphone
- [ ] Usa DevTools per estrarre URL iPhone 16/17
- [ ] Ripeti per MacBook, iPad
- [ ] Salva tutti gli URL in file separato

### Fase 3: Aggiornamento Codice
- [ ] Aggiungi funzioni helper a script.js
- [ ] Aggiorna database products[] con URL reali
- [ ] Implementa getOptimizedImageUrl()
- [ ] Implementa handleImageError()
- [ ] Aggiorna selectProductColor()

### Fase 4: Testing
- [ ] Test su Chrome Desktop
- [ ] Test su Safari Desktop
- [ ] Test su Chrome Mobile
- [ ] Test su Safari iOS
- [ ] Test cambio colore per ogni prodotto
- [ ] Test fallback immagini (disconnetti internet)
- [ ] Test performance (DevTools Network)

### Fase 5: Ottimizzazione
- [ ] Verifica lazy loading immagini
- [ ] Verifica dimensioni file appropriate
- [ ] Implementa preload immagini critiche
- [ ] Aggiungi Progressive Web App caching (opzionale)

### Post-Implementazione
- [ ] Documenta URL non funzionanti
- [ ] Crea piano aggiornamento URL mensile
- [ ] Monitora broken images in produzione
- [ ] Feedback utenti su qualitÃ  immagini

---

## SEZIONE 11: TROUBLESHOOTING

### Problema: Immagine Non Si Carica

**Sintomi:**
- Immagine non appare
- Appare placeholder
- Console mostra errore 404

**Soluzioni:**
1. Verifica URL in browser direttamente
2. Controlla parametri URL (wid, hei, fmt)
3. Prova rimuovere parametro `.v=`
4. Usa DevTools per ottenere URL aggiornato
5. Verifica connessione internet

### Problema: Immagine Sfocata

**Sintomi:**
- Immagine appare con bassa qualitÃ 
- Pixelata su schermi Retina

**Soluzioni:**
1. Aumenta parametro `wid` e `hei`
2. Aumenta `qlt` a 90-95
3. Usa formato `p-jpg` invece di `jpeg`
4. Verifica risoluzione display target

### Problema: Caricamento Lento

**Sintomi:**
- Immagini impiegano troppo tempo
- Pagina sembra "pesante"

**Soluzioni:**
1. Riduci dimensioni immagini per mobile
2. Implementa lazy loading
3. Usa formato `jpeg` invece di `p-jpg`
4. Riduci `qlt` a 75-80
5. Implementa CDN caching

### Problema: Colore Non Corrisponde

**Sintomi:**
- Colore immagine diverso da gradient
- Nome colore non corretto

**Soluzioni:**
1. Verifica codice colore HEX in Sezione 5
2. Aggiorna gradient CSS
3. Conferma nome colore ufficiale Apple
4. Usa DevTools per verificare URL originale

### Problema: URL Con .v= Non Funziona

**Sintomi:**
- URL con hash versione ritorna 404
- URL senza .v= funziona

**Soluzioni:**
1. Hash .v= Ã¨ scaduto
2. Usa DevTools per ottenere nuovo hash
3. Oppure rimuovi completamente parametro .v=
4. URL funzionerÃ  ugualmente (cache meno efficiente)

---

## SEZIONE 12: AGGIORNAMENTI FUTURI

### Quando Aggiornare URL

**Trigger per aggiornamento:**
- Apple lancia nuovi prodotti (Settembre/Marzo)
- Apple introduce nuovi colori
- URL esistenti smettono di funzionare
- Apple aggiorna CDN

### Procedura Aggiornamento

1. **Identifica nuovi prodotti**
   - Monitora apple.com/newsroom
   - Verifica apple.com/shop

2. **Estrai URL con DevTools**
   - Segui procedura Sezione 4
   - Documenta tutti i nuovi URL

3. **Aggiorna database**
   - Aggiungi URL a script.js
   - Aggiorna JSON database
   - Aggiorna codici colore HEX

4. **Testa**
   - Verifica funzionamento URL
   - Test su tutti i device
   - Deploy in produzione

### Pattern Nuovi Prodotti

Per nuovi prodotti Apple, segui questi pattern:

**iPhone (anno corrente)**
```
iphone-{model}-finish-select-{YYYYMM}-{size}-{color}
```

**iPhone (refurbished/precedenti)**
```
refurb-iphone-{model}-{color}-{YYYYMM}
```

**MacBook**
```
refurb-{model}-{chip}-{color}-{YYYYMM}
```

**iPad**
```
ipad-{model}-finish-select-{YYYYMM}-{color}
```

---

## SEZIONE 13: RISORSE UTILI

### Link Apple Ufficiali

- **Apple Store:** https://www.apple.com/shop
- **Apple Newsroom:** https://www.apple.com/newsroom
- **Developer Resources:** https://developer.apple.com/design/resources
- **Marketing Guidelines:** https://www.apple.com/legal/intellectual-property/guidelinesfor3rdparties.html

### Tools

- **Chrome DevTools:** F12 (Windows) / Cmd+Option+I (Mac)
- **Safari DevTools:** Cmd+Option+I (abilita in Preferences)
- **Image Optimization:** https://squoosh.app
- **Color Picker:** https://htmlcolorcodes.com/color-picker

### Documentazione

- **CDN Best Practices:** https://web.dev/image-cdns/
- **Responsive Images:** https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images
- **Lazy Loading:** https://web.dev/lazy-loading-images/

---

## SEZIONE 14: CONTATTI E SUPPORTO

Per problemi con questa implementazione:

1. **Verifica checklist** in Sezione 10
2. **Consulta troubleshooting** in Sezione 11
3. **Testa URL manualmente** nel browser
4. **Usa DevTools** per debug

**Note Finali:**
- URL Apple CDN possono cambiare senza preavviso
- Implementa sempre fallback con emoji/placeholder
- Monitora broken images regolarmente
- Aggiorna database ogni 3-6 mesi

---

## RIEPILOGO QUICK START

1. **Leggi Sezione 1** per URL verificati
2. **Usa Sezione 4** per estrarre nuovi URL con DevTools
3. **Implementa Sezione 8** per integrazione codice
4. **Testa con Sezione 10** checklist
5. **Risolvi problemi con Sezione 11**

**File Necessari:**
- Questo documento (guida completa)
- script.js (codice app)
- Database JSON (opzionale, per scalabilitÃ )

**Tempo Stimato Implementazione:**
- Setup iniziale: 2-3 ore
- Test completo: 1-2 ore
- Estrazione URL nuovi prodotti: 30-60 min per categoria

---

**Fine documento - Versione 1.0 - 26 Gennaio 2025**
